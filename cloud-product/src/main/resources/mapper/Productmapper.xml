<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cloud.product.mapper.ProductMapper">


    <select id="getProductList" resultType="com.cloud.product.vo.ProductListItemVO">
        select product.id,
               product.product_name,
               product.description,
               product.main_image,
               product.image_urls,
               product.category_id,
               product.brand_id,
               product.status,
               product.create_time,
               product.update_time,
               product_sku.id as sku_id,
               product_sku.sku_code,
               product_sku.price,
               product_sku.stock,
               category.category_name
            from product
            left join product_sku on product.id = product_sku.product_id
            left join category on product.category_id = category.id
            where product.status = 1
            and product_sku.status = 1
            and category.status = 1
    </select>
</mapper>
